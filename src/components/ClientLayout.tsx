import { useState } from 'react'
import { useNavigate, useLocation, Outlet } from 'react-router-dom'

const ClientLayout = () => {
  const navigate = useNavigate()
  const location = useLocation()
  
  const getActiveItem = () => {
    if (location.pathname === '/client-dashboard') return 'dashboard'
    if (location.pathname === '/browse-freelancers') return 'browse'
    if (location.pathname === '/jobs' || location.pathname === '/post-job') return 'jobs'
    if (location.pathname === '/messages' || location.pathname === '/project-files') return 'messages'
    if (location.pathname === '/payment-history') return 'payments'
    if (location.pathname === '/settings') return 'settings'
    if (location.pathname === '/faqs') return 'faqs'
    if (location.pathname === '/contact-support') return 'contact-support'
    if (location.pathname === '/notifications') return 'notifications'
    return 'dashboard'
  }
  
  const [activeItem, setActiveItem] = useState(getActiveItem())

  const handleNavigation = (itemId: string) => {
    setActiveItem(itemId)
    switch (itemId) {
      case 'browse':
        navigate('/browse-freelancers')
        break
      case 'dashboard':
        navigate('/client-dashboard')
        break
      case 'jobs':
        navigate('/jobs')
        break
      case 'messages':
        navigate('/messages')
        break
      case 'payments':
        navigate('/payment-history')
        break
      case 'settings':
        navigate('/settings')
        break
      case 'faqs':
        navigate('/faqs')
        break
      case 'contact-support':
        navigate('/contact-support')
        break
      case 'notifications':
        navigate('/notifications')
        break
      default:
        // Handle other navigation items as needed
        break
    }
  }

  const handleNotificationClick = () => {
    navigate('/notifications')
  }

  const sidebarItems = [
    {
      id: 'dashboard',
      label: 'Dashboard',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M18.4937 7.98438C18.4937 8.54688 18.025 8.9875 17.4937 8.9875H16.4937L16.5156 13.9937C16.5156 14.0781 16.5094 14.1625 16.5 14.2469V14.75C16.5 15.4406 15.9406 16 15.25 16H14.75C14.7156 16 14.6813 16 14.6469 15.9969C14.6031 16 14.5594 16 14.5156 16H13.5H12.75C12.0594 16 11.5 15.4406 11.5 14.75V14V12C11.5 11.4469 11.0531 11 10.5 11H8.5C7.94688 11 7.5 11.4469 7.5 12V14V14.75C7.5 15.4406 6.94063 16 6.25 16H5.5H4.50313C4.45625 16 4.40937 15.9969 4.3625 15.9937C4.325 15.9969 4.2875 16 4.25 16H3.75C3.05938 16 2.5 15.4406 2.5 14.75V11.25C2.5 11.2219 2.5 11.1906 2.50312 11.1625V8.9875H1.5C0.9375 8.9875 0.5 8.55 0.5 7.98438C0.5 7.70312 0.59375 7.45312 0.8125 7.23438L8.825 0.25C9.04375 0.03125 9.29375 0 9.5125 0C9.73125 0 9.98125 0.0625 10.1687 0.21875L18.15 7.23438C18.4 7.45312 18.525 7.70312 18.4937 7.98438Z" fill="#7602FD"/>
        </svg>
      ),
      active: true
    },
    {
      id: 'browse',
      label: 'Browse Freelancers',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 17 16">
          <path d="M8.5 16C10.6217 16 12.6566 15.1571 14.1569 13.6569C15.6571 12.1566 16.5 10.1217 16.5 8C16.5 5.87827 15.6571 3.84344 14.1569 2.34315C12.6566 0.842855 10.6217 0 8.5 0C6.37827 0 4.34344 0.842855 2.84315 2.34315C1.34285 3.84344 0.5 5.87827 0.5 8C0.5 10.1217 1.34285 12.1566 2.84315 13.6569C4.34344 15.1571 6.37827 16 8.5 16ZM10.0844 10.1594L5.575 11.8938C4.96875 12.1281 4.37187 11.5312 4.60625 10.925L6.34062 6.41563C6.44375 6.15 6.65 5.94375 6.91563 5.84062L11.425 4.10625C12.0312 3.87187 12.6281 4.46875 12.3938 5.075L10.6594 9.58438C10.5594 9.85 10.35 10.0563 10.0844 10.1594ZM9.5 8C9.5 7.73478 9.39464 7.48043 9.20711 7.29289C9.01957 7.10536 8.76522 7 8.5 7C8.23478 7 7.98043 7.10536 7.79289 7.29289C7.60536 7.48043 7.5 7.73478 7.5 8C7.5 8.26522 7.60536 8.51957 7.79289 8.70711C7.98043 8.89464 8.23478 9 8.5 9C8.76522 9 9.01957 8.89464 9.20711 8.70711C9.39464 8.51957 9.5 8.26522 9.5 8Z" fill="#3A404A"/>
        </svg>
      )
    },
    {
      id: 'jobs',
      label: 'My Jobs',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M6.96875 1.5H12.0312C12.1859 1.5 12.3125 1.6125 12.3125 1.75V3H6.6875V1.75C6.6875 1.6125 6.81406 1.5 6.96875 1.5ZM5 1.75V3H2.75C1.50898 3 0.5 3.89687 0.5 5V8H7.25H11.75H18.5V5C18.5 3.89687 17.491 3 16.25 3H14V1.75C14 0.784375 13.1176 0 12.0312 0H6.96875C5.88242 0 5 0.784375 5 1.75ZM18.5 9H11.75V10C11.75 10.5531 11.2473 11 10.625 11H8.375C7.75273 11 7.25 10.5531 7.25 10V9H0.5V13C0.5 14.1031 1.50898 15 2.75 15H16.25C17.491 15 18.5 14.1031 18.5 13V9Z" fill="#3A404A"/>
        </svg>
      )
    },
    {
      id: 'messages',
      label: 'Messages',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M2.75 0C1.50898 0 0.5 0.896875 0.5 2V11C0.5 12.1031 1.50898 13 2.75 13H6.125V15.5C6.125 15.6906 6.24453 15.8625 6.43438 15.9469C6.62422 16.0312 6.85273 16.0125 7.025 15.9L11.3738 13H16.25C17.491 13 18.5 12.1031 18.5 11V2C18.5 0.896875 17.491 0 16.25 0H2.75Z" fill="#3A404A"/>
        </svg>
      )
    },
    {
      id: 'payments',
      label: 'Payments',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M2.5 2C1.39688 2 0.5 2.76875 0.5 3.71429V4.57143H18.5V3.71429C18.5 2.76875 17.6031 2 16.5 2H2.5ZM18.5 7.14286H0.5V12.2857C0.5 13.2312 1.39688 14 2.5 14H16.5C17.6031 14 18.5 13.2312 18.5 12.2857V7.14286ZM4 10.5714H6C6.275 10.5714 6.5 10.7643 6.5 11C6.5 11.2357 6.275 11.4286 6 11.4286H4C3.725 11.4286 3.5 11.2357 3.5 11C3.5 10.7643 3.725 10.5714 4 10.5714ZM7.5 11C7.5 10.7643 7.725 10.5714 8 10.5714H12C12.275 10.5714 12.5 10.7643 12.5 11C12.5 11.2357 12.275 11.4286 12 11.4286H8C7.725 11.4286 7.5 11.2357 7.5 11Z" fill="#3A404A"/>
        </svg>
      )
    },
    {
      id: 'settings',
      label: 'Settings',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M17.4185 5.20625C17.531 5.47813 17.4361 5.78125 17.1935 5.975L15.6713 7.20625C15.7099 7.46563 15.731 7.73125 15.731 8C15.731 8.26875 15.7099 8.53438 15.6713 8.79375L17.1935 10.025C17.4361 10.2188 17.531 10.5219 17.4185 10.7937C17.2638 11.1656 17.0775 11.5219 16.863 11.8656L16.6978 12.1187C16.4658 12.4625 16.2056 12.7875 15.9209 13.0938C15.7134 13.3188 15.3689 13.3937 15.0595 13.3062L13.1013 12.7531C12.6302 13.075 12.1099 13.3438 11.5545 13.5469L11.115 15.3313C11.0447 15.6156 10.7986 15.8406 10.4752 15.8875C9.99 15.9594 9.49078 15.9969 8.98101 15.9969C8.47125 15.9969 7.97203 15.9594 7.48687 15.8875C7.16344 15.8406 6.91734 15.6156 6.84703 15.3313L6.40758 13.5469C5.85211 13.3438 5.3318 13.075 4.8607 12.7531L2.90601 13.3094C2.59664 13.3969 2.25211 13.3188 2.04469 13.0969C1.75992 12.7906 1.49976 12.4656 1.26773 12.1219L1.1025 11.8687C0.888046 11.525 0.701718 11.1687 0.547031 10.7969C0.434531 10.525 0.529452 10.2219 0.772031 10.0281L2.2943 8.79688C2.25562 8.53438 2.23453 8.26875 2.23453 8C2.23453 7.73125 2.25562 7.46563 2.2943 7.20625L0.772031 5.975C0.529452 5.78125 0.434531 5.47813 0.547031 5.20625C0.701718 4.83438 0.888046 4.47813 1.1025 4.13438L1.26773 3.88125C1.49976 3.5375 1.75992 3.2125 2.04469 2.90625C2.25211 2.68125 2.59664 2.60625 2.90601 2.69375L4.86422 3.24688C5.33531 2.925 5.85562 2.65625 6.41109 2.45312L6.85055 0.66875C6.92086 0.384375 7.16695 0.159375 7.49039 0.1125C7.97555 0.0375 8.47476 0 8.98453 0C9.4943 0 9.99352 0.0375 10.4787 0.109375C10.8021 0.15625 11.0482 0.38125 11.1185 0.665625L11.558 2.45C12.1134 2.65313 12.6337 2.92188 13.1048 3.24375L15.063 2.69062C15.3724 2.60312 15.717 2.68125 15.9244 2.90313C16.2091 3.20938 16.4693 3.53437 16.7013 3.87812L16.8666 4.13125C17.081 4.475 17.2673 4.83125 17.422 5.20312L17.4185 5.20625ZM8.98453 10.5C9.73045 10.5 10.4458 10.2366 10.9733 9.76777C11.5007 9.29893 11.797 8.66304 11.797 8C11.797 7.33696 11.5007 6.70107 10.9733 6.23223C10.4458 5.76339 9.73045 5.5 8.98453 5.5C8.23861 5.5 7.52324 5.76339..." fill="#3A404A"/>
        </svg>
      )
    },
    {
      id: 'faqs',
      label: 'FAQs',
      icon: (
        <svg className="w-[18px] h-4" fill="none" stroke="currentColor" viewBox="0 0 19 16">
          <path d="M13.25 1.62H5.75C3.5 1.62 2 2.95334 2 4.95334V8.95334C2 10.9533 3.5 12.2867 5.75 12.2867V13.7067C5.75 14.24 6.4175 14.56 6.9125 14.26L10.25 12.2867H13.25C15.5 12.2867 17 10.9533 17 8.95334V4.95334C17 2.95334 15.5 1.62 13.25 1.62ZM9.5 9.73334C9.185 9.73334 8.9375 9.50667 8.9375 9.23334C8.9375 8.96 9.185 8.73334 9.5 8.73334C9.815 8.73334 10.0625 8.96 10.0625 9.23334C10.0625 9.50667 9.815 9.73334 9.5 9.73334ZM10.445 6.96667C10.1525 7.14 10.0625 7.25334 10.0625 7.44V7.58C10.0625 7.85334 9.8075 8.08 9.5 8.08C9.1925 8.08 8.9375 7.85334 8.9375 7.58V7.44C8.9375 6.66667 9.575 6.28667 9.815 6.14C10.0925 5.97334 10.1825 5.86 10.1825 5.68667C10.1825 5.35334 9.875 5.08 9.5 5.08C9.125 5.08 8.8175 5.35334 8.8175 5.68667C8.8175 5.96 8.5625 6.18667 8.255 6.18667C7.9475 6.18667 7.6925 5.96 7.6925 5.68667C7.6925 4.8 8.5025 4.08 9.5 4.08C10.4975 4.08 11.3075 4.8 11.3075 5.68667C11.3075 6.44667 10.6775 6.82667 10.445 6.96667Z" fill={activeItem === 'faqs' ? '#7602FD' : '#3A404A'}/>
        </svg>
      )
    }
  ]

  return (
    <div className="min-h-screen bg-white">
      {/* Top Navigation */}
      <nav className="flex h-[72px] items-center justify-between px-24 bg-white shadow-[0_12px_55.7px_11px_rgba(0,0,0,0.08)]">
        <div className="flex items-center gap-6">
          <div className="flex w-[84px] h-9 justify-center items-center">
            <svg className="w-[70px] h-9" viewBox="0 0 71 36" fill="none">
              <g clipPath="url(#clip0_40000024_19341)">
                <path d="M67.9049 17.0821L67.8678 17.1193C68.128 16.4131 68.6483 16.1529 69.0943 16.1529C69.7262 16.1529 70.2837 16.6361 70.2837 17.3423C70.2837 17.491 70.2837 17.6768 70.2094 17.8998C68.9085 21.245 66.158 22.9547 63.4819 23.2149C62.2554 25.2963 60.2483 26.8202 57.3863 26.8202C53.2978 26.8202 51.4766 23.5866 51.4766 20.0556C51.4766 15.7069 54.2271 10.875 58.8359 10.875C59.8394 10.875 60.6943 11.0981 61.4005 11.3954C63.4819 12.1759 64.82 14.8892 64.82 17.7883C64.82 18.7175 64.7456 19.6467 64.5226 20.5388C65.8979 20.0556 67.1987 18.9405 67.9049 17.0821ZM60.1368 13.9228V13.8857C59.3191 13.8857 58.8359 14.9635 58.8359 16.2644C58.8359 18.16 59.8766 19.9069 61.512 20.5388C61.7722 19.7211 61.8837 18.7919 61.8837 17.714C61.8837 15.6326 61.2518 13.9228 60.1368 13.9228ZM57.4235 24.1069C58.4642 24.1069 59.5049 23.6609 60.3226 22.7317C57.9067 21.6538 56.3828 19.1264 56.3828 16.7104C56.3828 15.8927 56.5315 15.0379 56.7545 14.2945C55.2678 15.5211 54.4129 17.937 54.4129 20.0556C54.4129 22.806 55.7138 24.1069 57.4235 24.1069Z" fill="black"/>
                <path d="M52.0524 17.0813L52.0152 17.1185C52.2754 16.4123 52.7214 16.115 53.1674 16.115C53.7993 16.115 54.4311 16.6725 54.4311 17.3787C54.4311 17.5645 54.394 17.7132 54.3196 17.899C52.8701 21.43 50.7143 25.5557 47.2577 27.9716L47.1834 28.715C46.7745 33.1752 44.5073 35.9999 41.6453 35.9999C39.4895 35.9999 38.2258 34.5132 38.2258 32.7663C38.2258 29.607 41.4594 28.4548 44.4701 26.5221C44.5444 25.7415 44.5816 24.8495 44.6187 23.8459C43.132 25.4813 41.5338 26.1504 40.1214 26.1504C37.2966 26.1504 34.9922 23.8459 34.9922 20.315C34.9922 14.8884 38.5603 11.3203 42.5373 11.3203H42.5745C45.2878 11.3203 48.1869 12.7698 48.1869 15.3716C48.1869 16.2265 47.8152 20.8725 47.5179 24.4778C49.5249 22.5822 51.1975 19.4973 52.0524 17.0813ZM40.5302 23.4743C41.9055 23.4743 43.7639 22.6194 44.9161 18.4194C45.1019 17.4902 45.2134 16.6725 45.1763 15.7061C44.9533 14.7026 44.0984 14.1079 42.8718 14.1079C40.3444 14.1079 37.9285 16.5238 37.9285 20.2035C37.9285 22.4336 38.9692 23.4743 40.5302 23.4743ZM41.9426 33.2867H41.9798C42.7603 33.2867 43.6152 32.7663 44.1727 29.4212C42.5373 30.3875 41.0134 31.3539 41.0134 32.5061C41.0134 32.9893 41.3851 33.2867 41.9426 33.2867Z" fill="black"/>
                <path d="M35.647 17.0821L35.61 17.1193C35.8701 16.4131 36.3904 16.1529 36.8364 16.1529C37.4683 16.1529 38.0258 16.6361 38.0258 17.3423C38.0258 17.491 38.0259 17.6768 37.9515 17.8998C36.6507 21.245 33.9001 22.9547 31.224 23.2149C29.9975 25.2963 27.9904 26.8202 25.1284 26.8202C21.0399 26.8202 19.2188 23.5866 19.2188 20.0556C19.2188 15.7069 21.9691 10.875 26.578 10.875C27.5815 10.875 28.4364 11.0981 29.1426 11.3954C31.224 12.1759 32.5621 14.8892 32.5621 17.7883C32.5621 18.7175 32.4877 19.6467 32.2647 20.5388C33.64 20.0556 34.9408 18.9405 35.647 17.0821ZM27.8789 13.9228V13.8857C27.0612 13.8857 26.578 14.9635 26.578 16.2644C26.578 18.16 27.6187 19.9069 29.2541 20.5388C29.5143 19.7211 29.6258 18.7919 29.6258 17.714C29.6258 15.6326 28.9939 13.9228 27.8789 13.9228ZM25.1656 24.1069C26.2063 24.1069 27.247 23.6609 28.0647 22.7317C25.6488 21.6538 24.1249 19.1264 24.1249 16.7104C24.1249 15.8927 24.2736 15.0379 24.4966 14.2945C23.0099 15.5211 22.155 17.937 22.155 20.0556C22.155 22.806 23.4559 24.1069 25.1656 24.1069Z" fill="black"/>
                <path d="M21.107 15.9075C20.5866 15.9075 20.1406 16.1677 19.8432 16.8739C18.8769 19.327 16.8697 23.4899 14.8254 23.4899C13.5382 23.4899 12.5421 23.1988 11.5355 22.9046C10.5075 22.6042 9.46873 22.3005 8.09784 22.3005C7.61464 22.3005 6.9456 22.3749 6.31373 22.4864C8.21731 19.8906 8.92845 16.7469 9.61753 10.8046C8.32007 10.722 7.26466 10.4823 6.49538 10.2402C5.67373 17.7767 4.74067 20.6503 1.3331 23.4899C0.887072 23.8616 0.664062 24.382 0.664062 24.9024C0.664062 25.7201 1.37027 26.4263 2.26233 26.4263C2.55968 26.4263 2.89419 26.3148 3.22871 26.1661C5.12433 25.3112 6.27656 25.0882 7.68898 25.0882C8.58715 25.0882 9.66189 25.3451 10.8126 25.62C12.138 25.9368 13.5641 26.2776 14.937 26.2776C17.9476 26.2776 19.9176 23.3413 22.1105 17.6544C22.2221 17.4686 22.2592 17.2456 22.2592 17.0597C22.2592 16.3535 21.7017 15.9075 21.107 15.9075Z" fill="black"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M6.68031 8.70287C7.3534 8.93784 8.40422 9.2114 9.76665 9.29233L9.98966 9.29222C14.1898 9.29222 16.9403 6.6904 16.9403 3.56821C16.9403 1.56109 15.3792 0 13.1862 0C10.2498 0 8.20556 2.00712 7.16483 5.98419C5.86392 5.27798 4.97187 4.01424 4.52584 2.41598C4.30282 1.63543 3.81963 1.15223 3.15058 1.15223C2.33287 1.15223 1.8125 1.78411 1.8125 2.63899C1.8125 5.16648 3.78246 7.58245 6.68163 8.69752L6.68031 8.70287ZM10.2127 6.57889C10.7702 4.01424 11.6623 2.78767 12.8517 2.78767C13.4836 2.78767 13.8924 3.15936 13.8924 3.8284C13.8924 5.05497 12.5915 6.50455 10.2127 6.57889Z" fill="black"/>
              </g>
              <defs>
                <clipPath id="clip0_40000024_19341">
                  <rect width="70" height="36" fill="white" transform="translate(0.664062)"/>
                </clipPath>
              </defs>
            </svg>
          </div>
        </div>
        
        <div className="flex items-center gap-4">
          <button
            onClick={handleNotificationClick}
            className="w-[18px] h-5 hover:opacity-70 transition-opacity"
          >
            <svg className="w-[18px] h-5" fill="none" stroke="currentColor" viewBox="0 0 19 20">
              <path d="M9.312 0C8.62 0 8.062 0.559 8.062 1.25V1.949C5.23 2.398 3.062 4.852 3.062 7.813V9.117C3.062 10.891 2.456 12.613 1.351 13.996L0.769 14.727C0.542 15.008 0.499 15.395 0.655 15.719C0.812 16.043 1.14 16.25 1.499 16.25H17.124C17.484 16.25 17.812 16.043 17.968 15.719C18.124 15.395 18.081 15.008 17.855 14.727L17.273 14C16.167 12.613 15.562 10.891 15.562 9.117V7.813C15.562 4.852 13.394 2.398 10.562 1.949V1.25C10.562 0.559 10.003 0 9.312 0ZM9.312 3.75H9.624C11.866 3.75 13.687 5.57 13.687 7.813V9.117C13.687 10.988 14.23 12.813 15.237 14.375H3.386C4.394 12.813 4.937 10.988 4.937 9.117V7.813C4.937 5.57 6.757 3.75 8.999 3.75H9.312ZM11.812 17.5H9.312H6.812C6.812 18.164 7.073 18.801 7.542 19.27C8.011 19.738 8.648 20 9.312 20C9.976 20 10.612 19.738 11.081 19.27C11.55 18.801 11.812 18.164 11.812 17.5Z" fill="#6B7280"/>
            </svg>
          </button>
          <div className="flex w-[30px] h-[30px] justify-center items-center rounded-full bg-purple-100">
            <span className="text-purple-700 font-medium text-sm">A</span>
          </div>
        </div>
      </nav>

      <div className="flex">
        {/* Sidebar */}
        <div className="w-[243px] min-h-screen pt-11">
          <aside className="flex w-[243px] flex-col items-center border-r border-gray-200 bg-white shadow-[4px_4px_12.2px_0_rgba(0,0,0,0.04)] rounded-2xl pb-4 mb-40">
            <div className="flex w-full px-8 py-4">
              <div className="w-4 h-4"></div>
            </div>
            
            <nav className="flex w-[218px] flex-col gap-6">
              {sidebarItems.map((item) => (
                <button
                  key={item.id}
                  onClick={() => handleNavigation(item.id)}
                  className={`flex items-center gap-1 px-4 py-3 rounded-xl transition-colors ${
                    activeItem === item.id
                      ? 'bg-purple-50 text-purple-600'
                      : 'text-gray-600 hover:bg-gray-50'
                  }`}
                >
                  <div className="flex items-center gap-2 flex-1">
                    {item.icon}
                    <span className="text-base font-medium">{item.label}</span>
                  </div>
                </button>
              ))}
            </nav>
          </aside>
        </div>

        {/* Main Content */}
        <main className="flex-1 min-h-screen">
          <Outlet />
        </main>
      </div>
    </div>
  )
}

export default ClientLayout
